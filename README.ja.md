# Slack Bedrock MVP

> **English version**: [README.md](README.md)

Amazon Bedrock ã¨çµ±åˆã—ã¦ AI ç”Ÿæˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’æä¾›ã™ã‚‹ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ Slack ãƒœãƒƒãƒˆã€‚å¤šå±¤ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€ã‚¹ãƒ¬ãƒƒãƒ‰ã‚µãƒãƒ¼ãƒˆã€æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†æ©Ÿèƒ½ã‚’å‚™ãˆã¦ã„ã¾ã™ã€‚

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

> **ðŸ“– è©³ç´°ã‚¬ã‚¤ãƒ‰**: [docs/quickstart.md](docs/quickstart.md)

### å‰ææ¡ä»¶

- Bedrock ã‚¢ã‚¯ã‚»ã‚¹ãŒæœ‰åŠ¹ãª AWS ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- Node.js 18+ ãŠã‚ˆã³ Python 3.11+
- Slack ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ç®¡ç†è€…æ¨©é™

### ãƒ‡ãƒ—ãƒ­ã‚¤

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ split-stack ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆVerificationStack + ExecutionStackï¼‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚è©³ç´°ãªãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †ã¯ [CDK README](cdk/README.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

**ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½¿ç”¨ï¼‰**:

```bash
# 1. .env ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
cat > .env << EOF
SLACK_BOT_TOKEN=xoxb-your-bot-token
SLACK_SIGNING_SECRET=your-signing-secret
EOF

# 2. cdk.json ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆIDã‚’è¨­å®š
# "verificationAccountId" ã¨ "executionAccountId" ã‚’è¿½åŠ 

# 3. ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ
cd scripts && ./deploy-split-stacks.sh
```

**âš ï¸ é‡è¦**: ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã«ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚[ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰](docs/quickstart.md)ã‚’å‚ç…§ã€‚

## æ¦‚è¦

**ä¸»ãªä¾¡å€¤ææ¡ˆ**:

- **ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¸ã®è‡ªç„¶ãªçµ±åˆ**: æ–°ã—ã„ãƒ„ãƒ¼ãƒ«ã‚’å­¦ã¶å¿…è¦ãªãã€Slack ä¸Šã§ AI ã‚’åˆ©ç”¨
- **æœ€å°é™ã®æ“ä½œ**: ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆ`@bot è³ªå•` ã¨ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ï¼‰
- **çŸ¥è­˜å…±æœ‰**: ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼é–“ã§åŠ¹æžœçš„ãªä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å…±æœ‰

**è¨­è¨ˆåŽŸå‰‡**: ãƒŠãƒƒã‚¸ç†è«–ã¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åŠ¹æžœã‚’æ´»ç”¨ã€‚[è¨­è¨ˆåŽŸå‰‡](docs/explanation/design-principles.md)ã‚’å‚ç…§ã€‚

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
Slack â†’ Lambdaâ‘  (æ¤œè¨¼) â†’ API Gateway â†’ Lambdaâ‘¡ (Bedrock) â†’ Slack
          â†“                                 â†“
    Two-Key Defense                    Converse API
    (ç½²å + Existence Check)           ã‚¹ãƒ¬ãƒƒãƒ‰å±¥æ­´
```

**ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**:

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ          | èª¬æ˜Ž                                        |
| ----------------------- | ------------------------------------------- |
| **Slack Event Handler** | ç½²åæ¤œè¨¼ã€Existence Checkã€ã‚¤ãƒ™ãƒ³ãƒˆé‡è¤‡æŽ’é™¤ |
| **Execution API**       | IAM èªè¨¼ã•ã‚ŒãŸå†…éƒ¨ API                      |
| **Bedrock Processor**   | Converse APIã€ã‚¹ãƒ¬ãƒƒãƒ‰å±¥æ­´ã€æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«    |

è©³ç´°ã¯[ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦](docs/reference/architecture/overview.md)ã‚’å‚ç…§ã€‚

## ä¸»ãªæ©Ÿèƒ½

### ðŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- Two-Key Defense (HMAC SHA256 + Slack API Existence Check)
- ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆèªå¯ (team_id, user_id, channel_id)
- PII ãƒžã‚¹ã‚­ãƒ³ã‚°ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³æ¤œå‡º

### âš¡ å‡¦ç†

- éžåŒæœŸå‡¦ç†ï¼ˆ3 ç§’ä»¥å†…ã«å¿œç­”ï¼‰
- ã‚¤ãƒ™ãƒ³ãƒˆé‡è¤‡æŽ’é™¤
- æ§‹é€ åŒ– JSON ãƒ­ã‚°

### ðŸ¤– AI ã¨çµ±åˆ

- ãƒžãƒ«ãƒãƒ¢ãƒ‡ãƒ«ã‚µãƒãƒ¼ãƒˆ (Claude, Nova)
- ã‚¹ãƒ¬ãƒƒãƒ‰è¿”ä¿¡ã¨å±¥æ­´ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
- æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†ï¼ˆç”»åƒã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰

### ðŸ—ï¸ ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£

- AWS CDK (TypeScript)
- DynamoDB (ãƒˆãƒ¼ã‚¯ãƒ³ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã€é‡è¤‡æŽ’é™¤)
- AWS Secrets Manager

## ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

| å¯¾è±¡è€…                 | ãƒ‘ã‚¹                                                                                                                          |
| ---------------------- | ----------------------------------------------------------------------------------------------------------------------------- |
| **ã¯ã˜ã‚ã«**           | [ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ](docs/quickstart.md)                                                                                        |
| **é–‹ç™ºè€…**             | [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](docs/reference/architecture/overview.md) â†’ [å®Ÿè£…è©³ç´°](docs/reference/architecture/implementation-details.md) |
| **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ¼ãƒ ** | [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶](docs/reference/security/requirements.md) â†’ [è„…å¨ãƒ¢ãƒ‡ãƒ«](docs/reference/security/threat-model.md)           |
| **é‹ç”¨**               | [Slack è¨­å®š](docs/reference/operations/slack-setup.md) â†’ [ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°](docs/reference/operations/monitoring.md)              |
| **æ„æ€æ±ºå®šè€…**         | [éžæŠ€è¡“è€…å‘ã‘æ¦‚è¦](docs/presentation/non-technical-overview.md)                                                               |

**å…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: [docs/README.md](docs/README.md)

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
slack-ai-app/
â”œâ”€â”€ cdk/                    # AWS CDK ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£
â”œâ”€â”€ lambda/
â”‚   â”œâ”€â”€ verification-stack/  # Verification Zone (æ¤œè¨¼å±¤)
â”‚   â”‚   â””â”€â”€ slack-event-handler/
â”‚   â””â”€â”€ execution-stack/     # Execution Zone (å®Ÿè¡Œå±¤)
â”‚       â””â”€â”€ bedrock-processor/
â”œâ”€â”€ docs/                   # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ reference/          # ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€é‹ç”¨
â”‚   â”œâ”€â”€ explanation/        # è¨­è¨ˆåŽŸå‰‡ã€ADR
â”‚   â”œâ”€â”€ tutorials/          # å…¥é–€ã‚¬ã‚¤ãƒ‰
â”‚   â””â”€â”€ how-to/             # ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
â””â”€â”€ specs/                  # æ©Ÿèƒ½ä»•æ§˜
```

## é–‹ç™º

```bash
# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
cd lambda/verification-stack/slack-event-handler && pytest tests/
cd ../../execution-stack/bedrock-processor && pytest tests/

# ãƒ­ã‚°ç¢ºèª
aws logs tail /aws/lambda/slack-event-handler --follow
aws logs tail /aws/lambda/bedrock-processor --follow
```

é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã¯ [CLAUDE.md](CLAUDE.md) ã‚’å‚ç…§ã€‚

## ç’°å¢ƒå¤‰æ•°

| å¤‰æ•°                   | èª¬æ˜Ž                                             |
| ---------------------- | ------------------------------------------------ |
| `SLACK_SIGNING_SECRET` | Slack ã‚¢ãƒ—ãƒªç½²åã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆï¼ˆåˆå›žãƒ‡ãƒ—ãƒ­ã‚¤ã®ã¿ï¼‰ |
| `SLACK_BOT_TOKEN`      | Slack ãƒœãƒƒãƒˆ OAuth ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆåˆå›žãƒ‡ãƒ—ãƒ­ã‚¤ã®ã¿ï¼‰  |
| `BEDROCK_MODEL_ID`     | Bedrock ãƒ¢ãƒ‡ãƒ«ï¼ˆcdk.json ã§è¨­å®šï¼‰                |

ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¯åˆå›žãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã€AWS Secrets Manager ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

[ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰](docs/how-to/troubleshooting.md)ã‚’å‚ç…§ã€‚

**ã‚ˆãã‚ã‚‹å•é¡Œ**:

| å•é¡Œ                 | è§£æ±ºç­–                                           |
| -------------------- | ------------------------------------------------ |
| ç½²åæ¤œè¨¼å¤±æ•—         | Lambda Function URL ã¨ Secrets Manager ã‚’ç¢ºèª    |
| Existence Check å¤±æ•— | Bot Token ã® OAuth ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ç¢ºèª                |
| ãƒœãƒƒãƒˆãŒå¿œç­”ã—ãªã„   | Event Subscriptions ã¨ãƒœãƒƒãƒˆã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ç¢ºèª |

## ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã¯ [CONTRIBUTING.md](CONTRIBUTING.md) ã‚’å‚ç…§ã€‚

1. [CLAUDE.md](CLAUDE.md) ã§é–‹ç™ºãƒãƒªã‚·ãƒ¼ã‚’ç¢ºèª
2. æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
3. ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã¨ã¨ã‚‚ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°
4. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æå‡º

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

[ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±ã‚’ã“ã“ã«è¿½åŠ ]

## ã‚µãƒãƒ¼ãƒˆ

1. [ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](docs/README.md)ã‚’ç¢ºèª
2. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰](docs/how-to/troubleshooting.md)ã‚’ç¢ºèª
3. ãƒ­ã‚°ã¨å†ç¾æ‰‹é †ã‚’å«ã‚ã¦ GitHub Issue ã‚’ä½œæˆ

---

**æœ€çµ‚æ›´æ–°æ—¥**: 2025-12-27
